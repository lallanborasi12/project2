{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Helmet,HelmetProvider}from\"react-helmet-async\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import Loader from\"../common/Loader\";import{ReactSession}from\"react-client-session\";import{common_icons}from\"../../config/imagedata/small_icons\";import{DataLayer}from\"../common/Function\";import{freeEmails}from\"../common/StringData\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Thankyou=()=>{let result=useLocation();let history=useNavigate();ReactSession.setStoreType(\"localStorage\");const[credits,setCredits]=useState(0);const[currency,setCurrency]=useState(\"USD\");const[status,setStatus]=useState(\"\");const[transactionId,settransactionId]=useState(\"\");const[orderconfirm,setorderconfirm]=useState(null);const[isLoading,setIsLoading]=useState(false);const freeEmailsVar=freeEmails;useEffect(()=>{setorderconfirm(localStorage.getItem(\"__orderconfirm\"));if(result.state&&!freeEmailsVar.includes(ReactSession.get(\"email\"))){setCredits(result.state.credits);setCurrency(result.state.currency);setStatus(result.state.status);settransactionId(result.state.transactionId);console.log(\"tes\");}else if(freeEmailsVar.includes(ReactSession.get(\"email\"))){// Demo data set for test purpose\nsetCredits(14.99);setCurrency(\"USD\");settransactionId(111000222000);console.log(\"Thank you\");}else{history(\"/\");}// localStorage.clear(); // Uncomment before leave the page and complete testing.\nsetTimeout(()=>{setIsLoading(true);// Set loading state to false\n},1000);// Simulate a 2-second delay\n// Call the preventBack function to prevent going back\npreventBack();},[]);const thankDataLayer=()=>{settransactionId(111000222000);if(window.dataLayer){let currentTime=new Date().toISOString();let siteUrl=window.location.href;window.dataLayer.push({event:\"thankYouView\",stage:\"Thank You Page\",currentTime:currentTime,siteUrl:siteUrl,currency:currency,value:credits,transaction_id:transactionId});// console.log(window.dataLayer);\n// console.log(transactionId);\n}// Below one is dynamic\n// const dataLayer_res = DataLayer({\n//   event: \"thankYouView\",\n//   stage: \"Thank You Page\",\n// });\n};useEffect(()=>{if(transactionId){thankDataLayer();// console.log(transactionId);\n}},[transactionId]);// Prevent users from going back\nfunction preventBack(){window.history.pushState(null,null,window.location.href);}// console.log(result);\nif(isLoading===false){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Loader,{})});return false;}return/*#__PURE__*/_jsxs(_Fragment,{children:[orderconfirm!=null?/*#__PURE__*/_jsx(HelmetProvider,{children:/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"script\",{children:\"window.dataLayer = window.dataLayer || [];\\n                    dataLayer.push({\\n                        'transaction-id': Number('\"+transactionId+\"'),\\n                    'transaction-revenue': Number('\"+credits+\"')\\n                     })\"}),/*#__PURE__*/_jsx(\"script\",{children:\"dataLayer.push({\\n                            'currency': '\"+currency+\"',\\n                            'conversionValue': Number('\"+credits+\"'),\\n                            'event': 'orderkb'\\n                        });\"})]})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"div\",{className:\"tnx-dsktp-bg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tnkmn\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"tnkmail\",src:common_icons[\"mail\"],alt:\"mail-icon\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"wtcolor\",children:\"Thank You!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Welcome to Ketobalanced. We wish you a very healthy weight loss journey ahead. We'll soon share the meal plans through the email address that you've registered.\"}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Ketobalanced.com - your professional diet coach. Discover how healthy dieting can help you lose weight and boost your energy.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"appimg\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://play.google.com/store/apps/details?id=ketodietplan.carbmanager.ketoapp&hl=en_AU\",children:/*#__PURE__*/_jsx(\"img\",{src:common_icons[\"google_play\"],height:68,width:165,className:\"d-none\"})}),/*#__PURE__*/_jsx(\"a\",{href:\"https://apps.apple.com/in/app/ketobalanced/id6473776196\",children:/*#__PURE__*/_jsx(\"img\",{src:common_icons[\"apple_store\"],height:68,width:165,className:\"d-none\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"appimg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"weblog\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://user.ketobalanced.com/\",children:[\" \",\"Click here to access on web\"]})})]})})]});};export default/*#__PURE__*/React.memo(Thankyou);","map":{"version":3,"names":["React","useEffect","useState","Helmet","HelmetProvider","Link","useLocation","useNavigate","Loader","ReactSession","common_icons","DataLayer","freeEmails","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Thankyou","result","history","setStoreType","credits","setCredits","currency","setCurrency","status","setStatus","transactionId","settransactionId","orderconfirm","setorderconfirm","isLoading","setIsLoading","freeEmailsVar","localStorage","getItem","state","includes","get","console","log","setTimeout","preventBack","thankDataLayer","window","dataLayer","currentTime","Date","toISOString","siteUrl","location","href","push","event","stage","value","transaction_id","pushState","children","className","src","alt","height","width","memo"],"sources":["/var/www/html/meal.ketobalanced.com/src/components/offers/Thankyou.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport Loader from \"../common/Loader\";\r\nimport { ReactSession } from \"react-client-session\";\r\nimport { common_icons } from \"../../config/imagedata/small_icons\";\r\nimport { DataLayer } from \"../common/Function\";\r\n\r\nimport { freeEmails } from \"../common/StringData\";\r\n\r\nconst Thankyou = () => {\r\n  let result = useLocation();\r\n  let history = useNavigate();\r\n  ReactSession.setStoreType(\"localStorage\");\r\n\r\n  const [credits, setCredits] = useState(0);\r\n  const [currency, setCurrency] = useState(\"USD\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const [transactionId, settransactionId] = useState(\"\");\r\n  const [orderconfirm, setorderconfirm] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const freeEmailsVar = freeEmails;\r\n\r\n  useEffect(() => {\r\n    setorderconfirm(localStorage.getItem(\"__orderconfirm\"));\r\n    if (result.state && !freeEmailsVar.includes(ReactSession.get(\"email\"))) {\r\n      setCredits(result.state.credits);\r\n      setCurrency(result.state.currency);\r\n      setStatus(result.state.status);\r\n      settransactionId(result.state.transactionId);\r\n      console.log(\"tes\");\r\n    } else if (freeEmailsVar.includes(ReactSession.get(\"email\"))) {\r\n      // Demo data set for test purpose\r\n      setCredits(14.99);\r\n      setCurrency(\"USD\");\r\n      settransactionId(111000222000);\r\n      console.log(\"Thank you\");\r\n    } else {\r\n      history(\"/\");\r\n    }\r\n    // localStorage.clear(); // Uncomment before leave the page and complete testing.\r\n\r\n    setTimeout(() => {\r\n      setIsLoading(true); // Set loading state to false\r\n    }, 1000); // Simulate a 2-second delay\r\n\r\n    // Call the preventBack function to prevent going back\r\n    preventBack();\r\n  }, []);\r\n\r\n  const thankDataLayer = () => {\r\n    settransactionId(111000222000);\r\n    if (window.dataLayer) {\r\n      let currentTime = new Date().toISOString();\r\n      let siteUrl = window.location.href;\r\n      window.dataLayer.push({\r\n        event: \"thankYouView\",\r\n        stage: \"Thank You Page\",\r\n        currentTime: currentTime,\r\n        siteUrl: siteUrl,\r\n        currency: currency,\r\n        value: credits,\r\n        transaction_id: transactionId,\r\n      });\r\n      // console.log(window.dataLayer);\r\n      // console.log(transactionId);\r\n    }\r\n\r\n    // Below one is dynamic\r\n\r\n    // const dataLayer_res = DataLayer({\r\n    //   event: \"thankYouView\",\r\n    //   stage: \"Thank You Page\",\r\n    // });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (transactionId) {\r\n      thankDataLayer();\r\n      // console.log(transactionId);\r\n    }\r\n  }, [transactionId]);\r\n\r\n  // Prevent users from going back\r\n  function preventBack() {\r\n    window.history.pushState(null, null, window.location.href);\r\n  }\r\n  // console.log(result);\r\n\r\n  if (isLoading === false) {\r\n    return (\r\n      <>\r\n        <Loader />\r\n      </>\r\n    );\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {orderconfirm != null ? (\r\n        <HelmetProvider>\r\n          <Helmet>\r\n            <script>\r\n              {`window.dataLayer = window.dataLayer || [];\r\n                    dataLayer.push({\r\n                        'transaction-id': Number('` +\r\n                transactionId +\r\n                `'),\r\n                    'transaction-revenue': Number('` +\r\n                credits +\r\n                `')\r\n                     })`}\r\n            </script>\r\n            <script>\r\n              {`dataLayer.push({\r\n                            'currency': '` +\r\n                currency +\r\n                `',\r\n                            'conversionValue': Number('` +\r\n                credits +\r\n                `'),\r\n                            'event': 'orderkb'\r\n                        });`}\r\n            </script>\r\n          </Helmet>\r\n        </HelmetProvider>\r\n      ) : (\r\n        <></>\r\n      )}\r\n\r\n      <div className=\"tnx-dsktp-bg\">\r\n        <div className=\"tnkmn\">\r\n          <img className=\"tnkmail\" src={common_icons[\"mail\"]} alt=\"mail-icon\" />\r\n          <h1 className=\"wtcolor\">Thank You!</h1>\r\n          <p>\r\n            Welcome to Ketobalanced. We wish you a very healthy weight loss\r\n            journey ahead. We'll soon share the meal plans through the email\r\n            address that you've registered.\r\n          </p>\r\n          <h5>\r\n            <strong>\r\n              Ketobalanced.com - your professional diet coach. Discover how\r\n              healthy dieting can help you lose weight and boost your energy.\r\n            </strong>\r\n          </h5>\r\n          <div className=\"appimg\">\r\n            <a href=\"https://play.google.com/store/apps/details?id=ketodietplan.carbmanager.ketoapp&hl=en_AU\">\r\n              <img\r\n                src={common_icons[\"google_play\"]}\r\n                height={68}\r\n                width={165}\r\n                className=\"d-none\"\r\n              />\r\n            </a>\r\n\r\n            <a href=\"https://apps.apple.com/in/app/ketobalanced/id6473776196\">\r\n              <img\r\n                src={common_icons[\"apple_store\"]}\r\n                height={68}\r\n                width={165}\r\n                className=\"d-none\"\r\n              />\r\n            </a>\r\n          </div>\r\n          <div className=\"appimg\">\r\n            {/* <img\r\n              src={common_icons[\"preusaqrcode\"]}\r\n              height={165}\r\n              width={165}\r\n              className=\"d-none\"\r\n            />\r\n            <br />\r\n            <Link to={\"/deep/app-pwd-track\"}>Click to download</Link> */}\r\n          </div>\r\n          <div className=\"weblog\">\r\n            <a href=\"https://user.ketobalanced.com/\">\r\n              {\" \"}\r\n              Click here to access on web\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default React.memo(Thankyou);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}