{"ast":null,"code":"import React,{useEffect}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import API_BASE_URL from\"./constants\";const PayResponse=()=>{let history=useNavigate();const{pgname,getTranId}=useParams();const resObject={};useEffect(()=>{if(localStorage.getItem(\"state\")){let base64_data=JSON.parse(atob(localStorage.getItem(\"state\").slice(6,-4)));let accessToken=base64_data.responce.accessToken;statusValidatior(\"accessToken\",pgname,getTranId);}else{history(\"/\");}});const statusValidatior=async(aT,pgname,getTranId)=>{let statusurl;if(pgname===\"squareup\"){statusurl=API_BASE_URL+\"/pro/p4/psqup/merchant/statusvalidator/web/\"+getTranId;}else{statusurl=API_BASE_URL+\"/pro/p3/pg/merchant/statusvalidator/web/\"+getTranId;}const get_options={method:\"GET\",headers:{\"Content-Type\":\"application/json\"}};fetch(statusurl,get_options).then(res=>res.json()).then(result=>{if(result.status===\"COMPLETED\"){localStorage.setItem(\"__orderconfirm\",result.transactionId);history(\"/register-form.html\",{state:result});// history('/offers/thank-you.php', { state: result });\n}else{if(localStorage.getItem(\"state\")){let base64_data=JSON.parse(atob(localStorage.getItem(\"state\").slice(6,-4)));base64_data.responce.caseStudy.message=result.message;history(\"/final.php\",{state:base64_data});}else{history(\"/\");}}}).catch(error=>{if(localStorage.getItem(\"state\")){let base64_data=JSON.parse(atob(localStorage.getItem(\"state\").slice(6,-4)));base64_data.responce.caseStudy.message=\"\";history(\"/final.php\",{state:base64_data});}else{history(\"/\");}});};};export default PayResponse;","map":{"version":3,"names":["React","useEffect","useNavigate","useParams","API_BASE_URL","PayResponse","history","pgname","getTranId","resObject","localStorage","getItem","base64_data","JSON","parse","atob","slice","accessToken","responce","statusValidatior","aT","statusurl","get_options","method","headers","fetch","then","res","json","result","status","setItem","transactionId","state","caseStudy","message","catch","error"],"sources":["/var/www/html/meal.ketobalanced.com/src/config/PayResponse.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport API_BASE_URL from \"./constants\";\r\nconst PayResponse = () => {\r\n  let history = useNavigate();\r\n  const { pgname, getTranId } = useParams();\r\n\r\n  const resObject = {};\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"state\")) {\r\n      let base64_data = JSON.parse(\r\n        atob(localStorage.getItem(\"state\").slice(6, -4))\r\n      );\r\n      let accessToken = base64_data.responce.accessToken;\r\n\r\n      statusValidatior(\"accessToken\", pgname, getTranId);\r\n    } else {\r\n      history(\"/\");\r\n    }\r\n  });\r\n\r\n  const statusValidatior = async (aT, pgname, getTranId) => {\r\n    let statusurl;\r\n    if (pgname === \"squareup\") {\r\n      statusurl =\r\n        API_BASE_URL +\r\n        \"/pro/p4/psqup/merchant/statusvalidator/web/\" +\r\n        getTranId;\r\n    } else {\r\n      statusurl =\r\n        API_BASE_URL + \"/pro/p3/pg/merchant/statusvalidator/web/\" + getTranId;\r\n    }\r\n    const get_options = {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    fetch(statusurl, get_options)\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        if (result.status === \"COMPLETED\") {\r\n          localStorage.setItem(\"__orderconfirm\", result.transactionId);\r\n          history(\"/register-form.html\", { state: result });\r\n          // history('/offers/thank-you.php', { state: result });\r\n        } else {\r\n          if (localStorage.getItem(\"state\")) {\r\n            let base64_data = JSON.parse(\r\n              atob(localStorage.getItem(\"state\").slice(6, -4))\r\n            );\r\n            base64_data.responce.caseStudy.message = result.message;\r\n\r\n            history(\"/final.php\", { state: base64_data });\r\n          } else {\r\n            history(\"/\");\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (localStorage.getItem(\"state\")) {\r\n          let base64_data = JSON.parse(\r\n            atob(localStorage.getItem(\"state\").slice(6, -4))\r\n          );\r\n          base64_data.responce.caseStudy.message = \"\";\r\n\r\n          history(\"/final.php\", { state: base64_data });\r\n        } else {\r\n          history(\"/\");\r\n        }\r\n      });\r\n  };\r\n};\r\n\r\nexport default PayResponse;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}